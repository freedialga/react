local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local username = LocalPlayer.Name
local validUsernames = {
    "wallvahlito",
    "7M1KE",
    "wallvah"
}
local function isInTable(value, table)
    for _, v in pairs(table) do
        if v == value then
            return true
        end
    end
    return false
end
if isInTable(username, validUsernames) then
    -- pastebin
    
    local reachEnabled = true -- if you want the script activated on execution
    local hidef9 = true -- if you want to hide your f9 incase you get checked
    local notifs = true -- see notifs to see if you've toggled or increased/decreased reach
    local addedreach = 4 -- this is for outfield
    
    --[[
         - - dialga's react script - - 
    
         - the variable above refers to extra reach
         > set it to 0.01 if you don't want any
    
         - make sure you only execute once
         > executing more than once could lag you
    
         - please dm me bugs, @obl2k on discord
         > will get rewarded heavily :)
    --]]
    
    local holdingLeftMouseButton = false
    local mouseDownTime = 0
    local mouseReleaseTime = 0
    local heightModifier = {
        [30] = 500,
        [45] = 700,
        [50] = 700,
        [52] = 1000,
        [55] = 1000,
        [57] = 1100,
        [60] = 1100,
        [65] = 1150,
        [70] = 1200
    }
    local function isWithinRange(part1, part2, range)
        return (part1.Position - part2.Position).Magnitude <= range
    end
    
    local function getPreferredFoot()
        local player = game:GetService("Players").LocalPlayer
        local lighting = game:GetService("Lighting")
        local username = player.Name
        local preferredFootValue = lighting:WaitForChild(username):WaitForChild("PreferredFoot")
        return preferredFootValue.Value
    end
    
    local function onMouseButtonPressed(button)
        if button == 1 then
            holdingLeftMouseButton = true
            mouseDownTime = os.clock()
        end
    end
    
    local function onMouseButtonReleased(button)
        if button == 1 then
            if holdingLeftMouseButton then
                holdingLeftMouseButton = false
                mouseReleaseTime = os.clock()
                local holdDuration = mouseReleaseTime - mouseDownTime
                local thirdArgument
                if holdDuration < 0.2 then
                    thirdArgument = 30
                elseif holdDuration < 0.25 then
                    thirdArgument = 45
                elseif holdDuration < 0.3 then
                    thirdArgument = 50
                elseif holdDuration < 0.35 then
                    thirdArgument = 52
                elseif holdDuration < 0.4 then
                    thirdArgument = 55
                elseif holdDuration < 0.45 then
                    thirdArgument = 57
                elseif holdDuration < 0.5 then
                    thirdArgument = 60
                elseif holdDuration < 0.55 then
                    thirdArgument = 65
                elseif holdDuration < 0.6 then
                    thirdArgument = 70
                end
                local height = heightModifier[thirdArgument] or 0
                local ctrlHeld = game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.LeftControl)
                local cHeld = game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.C)
                local preferredFoot = getPreferredFoot()
                local legPartName = preferredFoot == 1 and "Right Leg" or "Left Leg"
                local legPart = game:GetService("Players").LocalPlayer.Character:FindFirstChild(legPartName)
                local qHeld = game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.Q)
                local eHeld = game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.E)
                if ctrlHeld or cHeld then
                    height = 0
                end
                local TPS = workspace:WaitForChild("TPSSystem"):WaitForChild("TPS")
                if (legPart and TPS and isWithinRange(TPS, legPart, 2 + (reachEnabled and addedreach or 0))) then
                    local args = {
                        [1] = TPS,
                        [2] = game:GetService("Players").LocalPlayer.Character.HumanoidRootPart,
                        [3] = thirdArgument,
                        [4] = Vector3.new(4000000, height, 4000000)
                    }
                    workspace:WaitForChild("FE"):WaitForChild("Actions"):WaitForChild("KickG1"):FireServer(unpack(args))
                    local sound = game.Workspace.FE.Kick.RemoteEvent
                    sound:FireServer()
                    if eHeld then
                        local argsC1 = {
                            [1] = TPS,
                            [2] = game:GetService("Players").LocalPlayer.Character.HumanoidRootPart
                        }
                        workspace:WaitForChild("FE"):WaitForChild("Actions"):WaitForChild("KickC1"):FireServer(unpack(argsC1))
                    end
                    if qHeld then
                        local argsC2 = {
                            [1] = TPS,
                            [2] = game:GetService("Players").LocalPlayer.Character.HumanoidRootPart
                        }
                        workspace:WaitForChild("FE"):WaitForChild("Actions"):WaitForChild("KickC2"):FireServer(unpack(argsC2))
                    end
                end
            end
        end
    end
    
    local function onKeyPress(input, gameProcessedEvent)
        if gameProcessedEvent then return end
        if input.KeyCode == Enum.KeyCode.Zero then
            reachEnabled = not reachEnabled
            if notifs == true then
                local notificationText = reachEnabled and "reach & react is now on" or "reach & react is now off"
                game:GetService("StarterGui"):SetCore("SendNotification", {
                    Title = "toggle", -- Required
                    Text = notificationText, -- Required
                    Duration = 5 -- Optional, duration in seconds
                })
            end
        elseif input.KeyCode == Enum.KeyCode.Minus then
            addedreach = addedreach - 0.25
            if notifs == true then
                game:GetService("StarterGui"):SetCore("SendNotification", {
                    Title = "reach adjusted", -- Required
                    Text = "additional reach decreased to " .. addedreach, -- Required
                    Duration = 5 -- Optional, duration in seconds
                })
            end
        elseif input.KeyCode == Enum.KeyCode.Equals then
            addedreach = addedreach + 0.25
            if notifs == true then
                game:GetService("StarterGui"):SetCore("SendNotification", {
                    Title = "reach adjusted", -- Required
                    Text = "additional reach increased to " .. addedreach, -- Required
                    Duration = 5 -- Optional, duration in seconds
                })
            end
        end
    end
    
    game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessedEvent)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            onMouseButtonPressed(1)
        elseif input.UserInputType == Enum.UserInputType.Keyboard then
            onKeyPress(input, gameProcessedEvent)
        end
    end)
    game:GetService("UserInputService").InputEnded:Connect(function(input, gameProcessedEvent)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            onMouseButtonReleased(1)
        end
    end)
    
    
    if hidef9 == true then
        local RunService = game:GetService("RunService")
        RunService.Heartbeat:Connect(function()
            print("                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ")
            print("                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ")
            print("                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ")
        end)
    end
    
    -- gk react script new
    
    repeat task.wait() until game:IsLoaded()
    local LocalPlayer = game.Players.LocalPlayer
    LocalPlayer.Character.Humanoid.Jump = true
    
    local range = 4.321
    local toggle = true
    local Players = game:GetService("Players")
    local Workspace = game:GetService("Workspace")
    local RunService = game:GetService("RunService")
    local UserInputService = game:GetService("UserInputService")
    
    local function isWithinRange(part1, part2, range)
        return (part1.Position - part2.Position).magnitude <= range
    end
    
    local function fireRemote(remote, part)
        local args = {
            [1] = Workspace.TPSSystem.TPS,
            [2] = part
        }
        remote:FireServer(unpack(args))
    end
    
    local remotes = {
        SaveLL = Workspace.FE.Actions.SaveLL,
        SaveRL = Workspace.FE.Actions.SaveRL,
        SaveLA = Workspace.FE.Actions.SaveLA,
        SaveRA = Workspace.FE.Actions.SaveRA,
        KickSound = Workspace.FE.Kick.RemoteEvent
    }
    
    local leftLeg, rightLeg, leftArm, rightArm, torso
    
    local function updateReferences()
        local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
        leftLeg = character:WaitForChild("Left Leg")
        rightLeg = character:WaitForChild("Right Leg")
        leftArm = character:WaitForChild("Left Arm")
        rightArm = character:WaitForChild("Right Arm")
        torso = character:WaitForChild("Torso")
    end
    
    LocalPlayer.CharacterAdded:Connect(updateReferences)
    updateReferences()
    
    UserInputService.InputBegan:Connect(function(input)
        if input.KeyCode == Enum.KeyCode.Tab then
            toggle = not toggle
        end
    end)
    
    RunService.Heartbeat:Connect(function()
        if toggle then
            local char = LocalPlayer.Character
            if char and char:FindFirstChildOfClass("Humanoid") and char.Humanoid:FindFirstChildOfClass("Animator") and next(char.Humanoid.Animator:GetPlayingAnimationTracks()) and char.Humanoid.Animator:GetPlayingAnimationTracks()[1].Animation.AnimationId == game.StarterGui.Animations.OldGKStance.AnimationId then
                if isWithinRange(leftLeg, Workspace.TPSSystem.TPS, range) or isWithinRange(rightLeg, Workspace.TPSSystem.TPS, range) or isWithinRange(leftArm, Workspace.TPSSystem.TPS, range) or isWithinRange(rightArm, Workspace.TPSSystem.TPS, range) or isWithinRange(torso, Workspace.TPSSystem.TPS, range) then
                    fireRemote(remotes.SaveLA, leftLeg)
                    fireRemote(remotes.SaveLA, leftLeg)
                    fireRemote(remotes.SaveRA, leftLeg)
                    fireRemote(remotes.SaveRA, leftLeg)
                    fireRemote(remotes.SaveLL, leftLeg)
                    fireRemote(remotes.SaveLL, leftLeg)
                    fireRemote(remotes.SaveLL, leftLeg)
                    fireRemote(remotes.SaveRL, leftLeg)
                    fireRemote(remotes.SaveRL, leftLeg)
                    fireRemote(remotes.SaveRL, leftLeg)
                    fireRemote(remotes.KickSound, leftLeg)
                end
            end
        end
    end)
end
